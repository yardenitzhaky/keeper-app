(this["webpackJsonpkeeper-app"]=this["webpackJsonpkeeper-app"]||[]).push([[0],{145:function(e,a,t){e.exports=t(160)},160:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(117),o=t.n(l),s=t(26),i=t(7),c=t(229),d=t(228),m=t(238),u=t(233),p=t(231),g=t(119),E=t.n(g),h=t(121),b=t.n(h);var v=e=>{let{onClick:a,loading:t,children:r,className:l="",disabled:o=!1}=e;const s="relative inline-flex items-center justify-center transition-all duration-200 "+l;return n.a.createElement("button",{onClick:a,disabled:t||o,className:s,role:"button","aria-busy":t,"aria-disabled":t||o},t?n.a.createElement("div",{className:"flex items-center space-x-2","aria-hidden":"true"},n.a.createElement("div",{className:"w-4 h-4 border-2 border-t-transparent border-white rounded-full animate-spin",role:"progressbar"}),n.a.createElement("span",{className:"opacity-70"},"Loading...")):r)};var f=()=>n.a.createElement("div",{className:"loading-container",role:"alert","aria-busy":"true","aria-label":"Loading content"},n.a.createElement("div",{className:"loading-spinner"},n.a.createElement("div",{className:"spinner-wrapper","aria-hidden":"true"},n.a.createElement("div",{className:"spinner-ring outer"}),n.a.createElement("div",{className:"spinner-ring inner"}),n.a.createElement("div",{className:"spinner-dot"})),n.a.createElement("div",{className:"spinner-text","aria-live":"polite"},"Loading..."),n.a.createElement("div",{className:"spinner-subtext",role:"status","aria-live":"polite"},"Please note: Initial load may take up to 30 seconds as the server spins up on Render's free tier.")));c.a.defaults.withCredentials=!0;const y="https://keeper-app-bakcend-and-db.onrender.com",w=Object(r.createContext)();function k(e){let{children:a}=e;const[t,l]=Object(r.useState)(null),[o,s]=Object(r.useState)(!0);return n.a.createElement(w.Provider,{value:{user:t,setUser:l,loading:o,login:async(e,a,t)=>{try{const r=(await c.a.post(y+"/login",{identifier:e,password:a,rememberMe:t},{withCredentials:!0,headers:{"Content-Type":"application/json"}})).data.user;return console.log("User set in AuthContext:",r),l(r),r}catch(n){var r;throw console.error("Login failed:",(null===(r=n.response)||void 0===r?void 0:r.data)||n.message),n}},logout:async()=>{try{await c.a.post(y+"/logout",{},{withCredentials:!0}),l(null)}catch(a){var e;console.error("Logout failed:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message)}},handleGoogleAuthSuccess:async()=>{try{const e=await c.a.get(y+"/me",{withCredentials:!0});return l(e.data.user),e.data.user}catch(a){var e;throw console.error("Error fetching user after Google auth:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message),a}},checkAuthStatus:async()=>{try{console.log("Checking auth status...");const e=await c.a.get(y+"/check-session",{withCredentials:!0,headers:{"Content-Type":"application/json"}});console.log("Auth status check response:",e.data),e.data.isAuthenticated&&e.data.user?(console.log("Setting user:",e.data.user),l(e.data.user)):(console.log("No authenticated user found"),l(null))}catch(a){var e;console.log("Error checking auth status:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message),l(null)}finally{s(!1)}}}},a)}const N=Object(r.memo)(n.a.forwardRef((e,a)=>n.a.createElement(p.a,Object.assign({elevation:6,ref:a,variant:"filled"},e)))),C=Object(r.memo)(()=>n.a.createElement("span",{className:"app-title",role:"banner"},n.a.createElement(E.a,{"aria-hidden":"true"}),n.a.createElement("span",{"aria-label":"Keeper App"},"Keeper App"))),S=Object(r.memo)(e=>{var a;let{username:t,email:r}=e;return n.a.createElement("div",{className:"user-profile",role:"complementary","aria-label":"User profile"},n.a.createElement(d.a,{title:`${t} (${r})`,arrow:!0},n.a.createElement("div",{className:"profile-info"},n.a.createElement(m.a,{className:"user-avatar","aria-hidden":"true"},(null===t||void 0===t||null===(a=t[0])||void 0===a?void 0:a.toUpperCase())||n.a.createElement(b.a,null)),n.a.createElement("span",{className:"username","aria-label":"Logged in as "+t},t))))});var O=()=>{const{user:e,logout:a}=Object(r.useContext)(w),t=Object(i.q)(),[l,o]=Object(r.useState)(!1),[s,c]=Object(r.useState)(null),[d,m]=Object(r.useState)({open:!1,message:"",severity:"success"}),p=(e,a)=>{"clickaway"!==a&&m(e=>({...e,open:!1}))},g=e=>{if(e.response)switch(e.response.status){case 401:return"Session expired. Please log in again.";case 403:return"You don't have permission to perform this action.";case 500:return"Server error. Please try again later.";default:return"An unexpected error occurred. Please try again."}return e.request?"Network error. Please check your connection.":"Failed to log out. Please try again."};return n.a.createElement("header",{role:"banner","aria-label":"Application header"},n.a.createElement("h1",null,n.a.createElement(C,null)),e&&n.a.createElement("div",{className:"header-controls",role:"navigation"},n.a.createElement(S,{username:e.username,email:e.email}),n.a.createElement(v,{onClick:async()=>{o(!0),c(null);try{await a(),m({open:!0,message:"Successfully logged out. See you next time!",severity:"success"}),setTimeout(()=>t("/login"),1500)}catch(s){console.error("Logout failed:",s);const a=g(s);c(a),m({open:!0,message:a,severity:"error"})}finally{o(!1)}},loading:l,className:"logout-button",disabled:l,"aria-label":l?"Logging out...":"Log out of your account","aria-busy":l},l?"Logging out...":"Logout"),s&&n.a.createElement("span",{className:"error-message",role:"alert","aria-live":"polite"},s)),n.a.createElement(u.a,{open:d.open,autoHideDuration:6e3,onClose:p,anchorOrigin:{vertical:"top",horizontal:"right"}},n.a.createElement(N,{onClose:p,severity:d.severity,sx:{width:"100%"}},d.message)))},j=t(222),P=t(223),L=t(224),x=t(225),A=t(226);var z=()=>{const e=(new Date).getFullYear(),a=[{icon:n.a.createElement(j.a,{fontSize:"small"}),url:"https://yardenitzhaky.github.io/Portfolio/",label:"Portfolio"},{icon:n.a.createElement(P.a,{fontSize:"small"}),url:"https://www.linkedin.com/in/yardenitzhaky",label:"LinkedIn"},{icon:n.a.createElement(L.a,{fontSize:"small"}),url:"https://github.com/yardenitzhaky",label:"GitHub"},{icon:n.a.createElement(x.a,{fontSize:"small"}),url:"mailto:yardene015@gmail.com",label:"Email"}];return n.a.createElement("footer",null,n.a.createElement("div",{className:"footer-content"},n.a.createElement("div",{className:"social-links"},a.map((e,a)=>n.a.createElement("a",{key:a,href:e.url,target:"_blank",rel:"noopener noreferrer","aria-label":e.label,className:"social-icon",title:e.label},e.icon))),n.a.createElement("p",{className:"copyright"},n.a.createElement(A.a,{fontSize:"small"}),n.a.createElement("span",null,e),n.a.createElement("span",{className:"separator"},"|"),n.a.createElement("span",{className:"creator"},"Created by Yarden Itzhaky"))))},R=t(122),F=t.n(R),U=t(98),T=t.n(U),q=t(240),D=t(65),B=t.n(D),I=t(236),G=t(126),M=t(234);c.a.defaults.withCredentials=!0;var V=e=>{let{id:a,title:t,content:l,category:o="Uncategorized",onDelete:s,onEdit:i}=e;const[m,u]=Object(r.useState)(!1),[p,g]=Object(r.useState)(!1),[E,h]=Object(r.useState)(null),[b,v]=Object(r.useState)(null),[f,y]=Object(r.useState)(o),w={Politics:"#FF6B6B",Sport:"#4DABF7",Technology:"#51CF66",Entertainment:"#FFD43B",Business:"#845EF7",Uncategorized:"#868E96"};return n.a.createElement("div",{className:"note",role:"article"},n.a.createElement("div",{className:"note-category"},n.a.createElement(d.a,{title:"Click to change category"},n.a.createElement(I.a,{icon:n.a.createElement(B.a,null),label:f||"Uncategorized",onClick:e=>v(e.currentTarget),size:"small",sx:{backgroundColor:w[o]||w.Uncategorized,color:"Entertainment"===o?"black":"white",fontWeight:500,marginBottom:"8px",cursor:"pointer","&:hover":{opacity:.9}}})),n.a.createElement(G.a,{anchorEl:b,open:Boolean(b),onClose:()=>v(null)},["Politics","Sport","Technology","Entertainment","Business","Uncategorized"].map(e=>n.a.createElement(M.a,{key:e,onClick:()=>{(async e=>{try{const r=await c.a.put(`https://keeper-app-bakcend-and-db.onrender.com/notes/${a}/category`,{category:e},{withCredentials:!0});y(e),i(a,t,l,r.data.category)}catch(E){console.error("Failed to update category:",E),h("Failed to update category")}})(e),v(null)},selected:e===f},n.a.createElement(B.a,{sx:{mr:1,color:w[e]}}),e)))),n.a.createElement("h1",null,t),n.a.createElement("p",null,l),E&&n.a.createElement("div",{role:"alert",style:{color:"#e53e3e",fontSize:"0.875rem",marginBottom:"8px"}},E),n.a.createElement("div",{className:"note-buttons"},n.a.createElement(d.a,{title:"Edit note",placement:"top"},n.a.createElement("button",{onClick:async()=>{g(!0),h(null);try{await i(a,t,l)}catch(E){console.error("Error editing note:",E),h("Failed to edit note")}finally{g(!1)}},disabled:p||m,"aria-label":"Edit note"},p?n.a.createElement(q.a,{size:24,color:"inherit","aria-label":"Editing..."}):n.a.createElement(T.a,{"aria-hidden":"true"}))),n.a.createElement(d.a,{title:"Delete note",placement:"top"},n.a.createElement("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this note?")){u(!0),h(null);try{await s(a)}catch(E){console.error("Error deleting note:",E),h("Failed to delete note")}finally{u(!1)}}},disabled:p||m,"aria-label":"Delete note"},m?n.a.createElement(q.a,{size:24,color:"inherit","aria-label":"Deleting..."}):n.a.createElement(F.a,{"aria-hidden":"true"})))))},$=t(241),W=t(235),_=t(230),K=t(242),Y=t(227),H=t(243),J=t(125),Z=t.n(J),Q=t(124),X=t.n(Q),ee=t(123),ae=t.n(ee);c.a.defaults.withCredentials=!0;var te=function(e){const[a,t]=Object(r.useState)(!1),[l,o]=Object(r.useState)(!1),[s,i]=Object(r.useState)({title:"",content:""}),d={Politics:"#FF6B6B",Sport:"#4DABF7",Technology:"#51CF66",Entertainment:"#FFD43B",Business:"#845EF7",Uncategorized:"#868E96"};function m(e){const{name:a,value:t}=e.target;i(e=>({...e,[a]:t}))}return Object(r.useEffect)(()=>{e.editNote&&(i({title:e.editNote.title,content:e.editNote.content,category:e.editNote.category||""}),t(!0))},[e.editNote]),n.a.createElement("div",null,n.a.createElement("form",{className:"create-note"},a&&n.a.createElement("input",{name:"title",onChange:m,value:s.title,placeholder:"Title"}),n.a.createElement("textarea",{onClick:function(){t(!0)},name:"content",onChange:m,value:s.content,placeholder:"Take a note...",rows:a?3:1}),a&&n.a.createElement("div",{className:"note-options"},n.a.createElement($.a,{size:"small",sx:{minWidth:200,marginTop:1}},n.a.createElement(W.a,null,"Category (Optional)"),n.a.createElement(_.a,{name:"category",value:s.category,onChange:m,label:"Category (Optional)"},n.a.createElement(M.a,{value:""},n.a.createElement("em",null,"Auto-detect category")),["Politics","Sport","Technology","Entertainment","Business"].map(e=>n.a.createElement(M.a,{key:e,value:e},n.a.createElement(B.a,{sx:{mr:1,color:d[e]}}),e)))),n.a.createElement(K.a,{variant:"caption",sx:{display:"flex",alignItems:"center",mt:1,color:"text.secondary"}},n.a.createElement(ae.a,{sx:{fontSize:16,mr:.5}}),"AI will try to auto-detect the category if none selected")),a&&n.a.createElement(Y.a,{in:!0},n.a.createElement(H.a,{onClick:async function(a){a.preventDefault(),o(!0);try{let a=s.category;if(!a)try{const e=await c.a.post("https://keeper-app-bakcend-and-db.onrender.com/classify-text",{title:s.title,content:s.content});console.log("Classification response:",e.data),a=e.data.category}catch(r){console.error("Classification error:",r),a="Uncategorized"}const n={...s,category:a};e.editNote?await e.onUpdate({...e.editNote,...n}):await e.onAdd(n),i({title:"",content:"",category:""}),t(!1)}catch(r){console.error("Error submitting note:",r)}finally{o(!1)}},disabled:l,sx:{position:"absolute",right:18,bottom:-18}},l?n.a.createElement(q.a,{size:24,color:"inherit"}):e.editNote?n.a.createElement(X.a,null):n.a.createElement(Z.a,null)))))};c.a.defaults.withCredentials=!0;var re=function(){const[e,a]=Object(r.useState)({identifier:"",password:"",rememberMe:!1}),[t,l]=Object(r.useState)({}),[o,c]=Object(r.useState)(!1),d=(Object(i.o)(),Object(i.q)()),{login:m,handleGoogleAuthSuccess:u,user:p,checkAuthStatus:g}=Object(r.useContext)(w);Object(r.useEffect)(()=>{p&&d("/")},[p,d]);const E=e=>{const{name:r,value:n,type:o,checked:s}=e.target;a(e=>({...e,[r]:"checkbox"===o?s:n})),t[r]&&l(e=>{const a={...e};return delete a[r],a})};return n.a.createElement("div",{className:"auth-container"},n.a.createElement("img",{src:"https://yardenitzhaky.github.io/keeper-app/images/logo.PNG",alt:"App Logo",className:"logo"}),n.a.createElement("h2",null,"Login"),n.a.createElement("form",{onSubmit:async a=>{a.preventDefault();const t=(()=>{const a={};return e.identifier.trim()||(a.identifier="Username or email is required"),e.password||(a.password="Password is required"),a})();if(Object.keys(t).length>0)l(t);else{c(!0);try{await m(e.identifier,e.password,e.rememberMe);d("/")}catch(s){var r,n,o;l({server:(null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||(null===(o=s.response)||void 0===o?void 0:o.data)||s.message||"Login failed"})}finally{c(!1)}}},noValidate:!0},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",id:"identifier",name:"identifier",placeholder:"Username or Email",value:e.identifier,onChange:E,"aria-label":"Username or Email","aria-invalid":t.identifier?"true":"false",required:!0}),t.identifier&&n.a.createElement("p",{className:"error",role:"alert"},t.identifier)),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Password",value:e.password,onChange:E,"aria-label":"Password","aria-invalid":t.password?"true":"false",required:!0}),t.password&&n.a.createElement("p",{className:"error",role:"alert"},t.password)),n.a.createElement("label",{className:"remember-me"},n.a.createElement("input",{type:"checkbox",id:"rememberMe",name:"rememberMe",checked:e.rememberMe,onChange:E}),n.a.createElement("span",null,"Remember Me")),t.server&&n.a.createElement("p",{className:"error server-error",role:"alert"},t.server),n.a.createElement(v,{loading:o,type:"submit",className:"w-full p-3 bg-[#f5ba13] text-white rounded hover:bg-[#e0a800] disabled:opacity-70","aria-label":o?"Logging in...":"Login"},"Login")),n.a.createElement(v,{onClick:e=>{e.preventDefault(),window.location.href="https://keeper-app-bakcend-and-db.onrender.com/auth/google"},className:"social-login-button","aria-label":"Sign in with Google"},n.a.createElement("img",{src:"https://yardenitzhaky.github.io/keeper-app/images/google_logo.png",alt:"Google","aria-hidden":"true"}),n.a.createElement("span",null,"Sign in with Google")),n.a.createElement("div",{className:"auth-links"},n.a.createElement("p",null,"Don't have an account? ",n.a.createElement(s.b,{to:"/Register"},"Register here")),n.a.createElement("p",null,n.a.createElement(s.b,{to:"/forgot-password"},"Forgot Password?"))))};c.a.defaults.withCredentials=!0;const ne=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/,le={username:{type:"text",placeholder:"Username",validate:e=>e.trim()?e.length<3?"Username must be at least 3 characters":null:"Username is required"},email:{type:"email",placeholder:"Email",validate:e=>e.trim()?/\S+@\S+\.\S+/.test(e)?null:"Email is invalid":"Email is required"},password:{type:"password",placeholder:"Password",validate:e=>e?ne.test(e)?null:"Password must be at least 8 characters, include an uppercase letter, a lowercase letter, a number, and a special character":"Password is required"},confirmPassword:{type:"password",placeholder:"Confirm Password",validate:(e,a)=>e!==a.password?"Passwords do not match":null}};var oe=function(){const[e,a]=Object(r.useState)({username:"",email:"",password:"",confirmPassword:""}),[t,l]=Object(r.useState)({}),[o,d]=Object(r.useState)(!1),m=Object(i.q)(),u=async a=>{a.preventDefault();const t=(()=>{const a={};return Object.entries(le).forEach(t=>{let[r,n]=t;const l=n.validate(e[r],e);l&&(a[r]=l)}),a})();if(Object.keys(t).length>0)l(t);else{d(!0);try{await c.a.post("https://keeper-app-bakcend-and-db.onrender.com/register",{username:e.username,email:e.email,password:e.password},{withCredentials:!0}),m("/verify-email",{state:{email:e.email}})}catch(n){var r;console.error("Registration failed:",(null===(r=n.response)||void 0===r?void 0:r.data)||n.message),p(n)}finally{d(!1)}}},p=e=>{var a,t,r;if(409===(null===(a=e.response)||void 0===a?void 0:a.status)){const{field:a,message:t}=e.response.data;l(e=>({...e,[a]:t}))}else(null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)?l(a=>({...a,server:e.response.data.message})):l(e=>({...e,server:"Registration failed. Please try again later."}))};return n.a.createElement("div",{className:"auth-container",role:"main","aria-labelledby":"register-title"},n.a.createElement("img",{src:"https://yardenitzhaky.github.io/keeper-app/images/logo.PNG",alt:"App Logo",className:"logo"}),n.a.createElement("h2",{id:"register-title"},"Register"),n.a.createElement("form",{onSubmit:u,noValidate:!0},Object.entries(le).map(r=>{let[o,s]=r;return n.a.createElement("div",{key:o,className:"form-field"},n.a.createElement("input",{type:s.type,id:o,name:o,placeholder:s.placeholder,value:e[o],onChange:e=>((e,t)=>{a(a=>({...a,[e]:t})),l(a=>{const{[e]:t,server:r,...n}=a;return n})})(o,e.target.value),"aria-invalid":!!t[o],"aria-describedby":t[o]?o+"-error":void 0,required:!0}),t[o]&&n.a.createElement("p",{className:"error",id:o+"-error",role:"alert"},t[o]))}),t.server&&n.a.createElement("p",{className:"error server-error",role:"alert"},t.server),n.a.createElement(v,{onClick:u,loading:o,className:"w-full p-3 bg-[#f5ba13] text-white rounded hover:bg-[#e0a800] disabled:opacity-70","aria-label":o?"Registering...":"Register"},"Register")),n.a.createElement("p",{className:"auth-link"},"Already have an account?"," ",n.a.createElement(s.b,{to:"/Login",className:"link"},"Login here")))};c.a.defaults.withCredentials=!0;var se=()=>{const[e,a]=Object(r.useState)(""),[t,l]=Object(r.useState)(""),[o,s]=Object(r.useState)(""),[i,d]=Object(r.useState)(!1);return n.a.createElement("div",{className:"auth-container"},n.a.createElement("img",{src:"https://yardenitzhaky.github.io/keeper-app/images/logo.PNG",alt:"App Logo",className:"logo"}),n.a.createElement("h2",null,"Forgot Password"),t&&n.a.createElement("p",{className:"success-message",role:"alert"},t),o&&n.a.createElement("p",{className:"error-message",role:"alert"},o),n.a.createElement("form",{onSubmit:async t=>{t.preventDefault(),d(!0),l(""),s("");try{const t=await c.a.post("https://keeper-app-bakcend-and-db.onrender.com/forgot-password",{email:e},{withCredentials:!0});l(t.data.message),a("")}catch(o){var r,n,i;console.error("Forgot Password Error:",(null===(r=o.response)||void 0===r?void 0:r.data)||o.message),s((null===(n=o.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"An error occurred. Please try again later.")}finally{d(!1)}},noValidate:!0},n.a.createElement("input",{type:"text",name:"email",placeholder:"Enter your registered email",value:e,onChange:e=>a(e.target.value),disabled:i,required:!0,autoComplete:"email","aria-label":"Email address",className:o?"error-input":""}),n.a.createElement("button",{type:"submit",disabled:i||!e.trim()},i?"Sending...":"Send Reset Link")))};c.a.defaults.withCredentials=!0;const ie=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/;var ce=()=>{const{token:e}=Object(i.s)(),a=Object(i.q)(),[t,l]=Object(r.useState)({password:"",confirmPassword:""}),[o,s]=Object(r.useState)({success:"",errors:{},isLoading:!1}),d=()=>{const e={};var a;return a=t.password,ie.test(a)||(e.password="Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character."),t.password!==t.confirmPassword&&(e.confirmPassword="Passwords do not match"),e},m=e=>{const{name:a,value:t}=e.target;l(e=>({...e,[a]:t})),s(e=>({...e,errors:{...e.errors,[a]:void 0,server:void 0}}))};return n.a.createElement("div",{className:"auth-container",role:"main","aria-labelledby":"reset-password-title"},n.a.createElement("h2",{id:"reset-password-title"},"Reset Password"),o.success?n.a.createElement("p",{className:"success-message",role:"alert"},o.success):n.a.createElement("form",{onSubmit:async r=>{r.preventDefault();const n=d();if(Object.keys(n).length>0)s(e=>({...e,errors:n}));else{s(e=>({...e,isLoading:!0,errors:{}}));try{const r=await c.a.post("https://keeper-app-bakcend-and-db.onrender.com/reset-password/"+e,{password:t.password},{withCredentials:!0});s(e=>({...e,success:r.data.message})),setTimeout(()=>a("/login"),3e3)}catch(o){var l;console.error("Reset Password Error:",(null===(l=o.response)||void 0===l?void 0:l.data)||o.message),s(e=>{var a,t;return{...e,errors:{server:(null===(a=o.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"An error occurred. Please try again later."}}})}finally{s(e=>({...e,isLoading:!1}))}}},noValidate:!0},n.a.createElement("div",{className:"form-field"},n.a.createElement("input",{type:"password",name:"password",placeholder:"Enter your new password",value:t.password,onChange:m,required:!0,"aria-label":"New password","aria-invalid":!!o.errors.password,"aria-describedby":o.errors.password?"password-error":void 0}),o.errors.password&&n.a.createElement("p",{id:"password-error",className:"error",role:"alert"},o.errors.password)),n.a.createElement("div",{className:"form-field"},n.a.createElement("input",{type:"password",name:"confirmPassword",placeholder:"Confirm your new password",value:t.confirmPassword,onChange:m,required:!0,"aria-label":"Confirm new password","aria-invalid":!!o.errors.confirmPassword,"aria-describedby":o.errors.confirmPassword?"confirm-password-error":void 0}),o.errors.confirmPassword&&n.a.createElement("p",{id:"confirm-password-error",className:"error",role:"alert"},o.errors.confirmPassword)),o.errors.server&&n.a.createElement("p",{className:"error server-error",role:"alert"},o.errors.server),n.a.createElement(v,{type:"submit",loading:o.isLoading,className:"w-full p-3 bg-[#f5ba13] text-white rounded hover:bg-[#e0a800] disabled:opacity-70",disabled:o.isLoading,"aria-label":o.isLoading?"Resetting password...":"Reset password"},o.isLoading?"Resetting...":"Reset Password")))};c.a.defaults.withCredentials=!0;var de=function(){var e;const[a,t]=Object(r.useState)({verificationCode:"",message:"",isLoading:!1,error:""}),l=Object(i.o)(),o=Object(i.q)(),s=null===(e=l.state)||void 0===e?void 0:e.email;return Object(r.useEffect)(()=>{s||o("/register")},[s,o]),s?n.a.createElement("div",{className:"auth-container",role:"main","aria-labelledby":"verify-email-title"},n.a.createElement("h2",{id:"verify-email-title"},"Email Verification"),a.message&&n.a.createElement("p",{className:"success-message",role:"alert"},a.message),a.error&&n.a.createElement("p",{className:"error-message",role:"alert"},a.error),n.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),t(e=>({...e,isLoading:!0,error:"",message:""}));try{const e=await c.a.post("https://keeper-app-bakcend-and-db.onrender.com/verify-email",{email:s,verificationCode:a.verificationCode,withCredentials:!0});t(a=>({...a,message:e.data.message,isLoading:!1})),setTimeout(()=>o("/login"),2e3)}catch(r){t(e=>{var a,t;return{...e,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Verification failed. Please try again.",isLoading:!1}})}},className:"verification-form",noValidate:!0},n.a.createElement("div",{className:"input-group"},n.a.createElement("label",{htmlFor:"verification-code",className:"sr-only"},"Verification Code"),n.a.createElement("input",{id:"verification-code",type:"text",placeholder:"Enter verification code",value:a.verificationCode,onChange:e=>{const a=e.target.value.replace(/[^0-9]/g,"");t(e=>({...e,verificationCode:a,error:""}))},maxLength:5,pattern:"[0-9]*",required:!0,"aria-label":"Enter verification code","aria-invalid":!!a.error,"aria-describedby":a.error?"error-message":void 0})),n.a.createElement(v,{type:"submit",loading:a.isLoading,disabled:!a.verificationCode||a.isLoading,className:"verify-button"},a.isLoading?"Verifying...":"Verify Email"))):null};var me=function(e){let{children:a}=e;const{user:t,loading:l}=Object(r.useContext)(w);return console.log("PrivateRoute - User:",t),console.log("PrivateRoute - Loading:",l),l?n.a.createElement(f,null):(console.log("PrivateRoute - Rendering children"),t?a:n.a.createElement(i.a,{to:"/login"}))};var ue=()=>{const[e,a]=Object(r.useState)(!0),[t,l]=Object(r.useState)(()=>{const e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?"safari":"chrome"});Object(r.useEffect)(()=>{localStorage.getItem("cookieAlertAcknowledged")&&a(!1)},[]);if(!e)return null;const o=()=>n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"cookie-alert-instructions"},n.a.createElement("h3",null,"Chrome Desktop Instructions:"),n.a.createElement("ol",null,n.a.createElement("li",null,"Click the three dots menu (\u22ee) in the top-right corner"),n.a.createElement("li",null,'Select "Settings"'),n.a.createElement("li",null,'Click "Privacy and security" in the left sidebar'),n.a.createElement("li",null,'Click "Cookies and other site data"'),n.a.createElement("li",null,'Select "Allow all cookies"'),n.a.createElement("li",null,"Refresh this page"))),n.a.createElement("div",{className:"cookie-alert-instructions"},n.a.createElement("h3",null,"Chrome Mobile Instructions:"),n.a.createElement("ol",null,n.a.createElement("li",null,"Tap the three dots menu (\u22ee)"),n.a.createElement("li",null,'Tap "Settings"'),n.a.createElement("li",null,'Tap "Privacy and security"'),n.a.createElement("li",null,'Tap "Cookies"'),n.a.createElement("li",null,'Select "Allow all cookies"'),n.a.createElement("li",null,"Refresh this page")))),s=()=>n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"cookie-alert-instructions"},n.a.createElement("h3",null,"Safari Desktop Instructions:"),n.a.createElement("ol",null,n.a.createElement("li",null,"Click Safari in the top menu"),n.a.createElement("li",null,'Select "Settings" (or press \u2318 + ,)'),n.a.createElement("li",null,'Go to "Privacy"'),n.a.createElement("li",null,'Under "Website tracking":'),n.a.createElement("li",null,'Uncheck "Prevent cross-site tracking"'),n.a.createElement("li",null,"Refresh this page"))),n.a.createElement("div",{className:"cookie-alert-instructions"},n.a.createElement("h3",null,"Safari Mobile Instructions:"),n.a.createElement("ol",null,n.a.createElement("li",null,"Open iPhone Settings"),n.a.createElement("li",null,'Scroll down and tap "Safari"'),n.a.createElement("li",null,'Under "Privacy & Security":'),n.a.createElement("li",null,'Turn off "Prevent Cross-Site Tracking"'),n.a.createElement("li",null,"Refresh this page"))));return n.a.createElement("div",{className:"cookie-alert-overlay"},n.a.createElement("div",{className:"cookie-alert-modal"},n.a.createElement("div",{className:"cookie-alert-header"},n.a.createElement("h2",{className:"cookie-alert-title"},n.a.createElement("span",{role:"img","aria-label":"warning"},"\u26a0\ufe0f"),"Cookie Settings Required"),n.a.createElement("button",{className:"cookie-alert-accept",onClick:()=>{localStorage.setItem("cookieAlertAcknowledged","true"),a(!1)}},"I've Enabled Cookies")),n.a.createElement("div",{className:"cookie-alert-content"},n.a.createElement("p",{className:"cookie-alert-description"},"To use Keeper App, you need to allow cookies and disable tracking prevention in your browser. This is required for maintaining your login session and ensuring the app functions properly."),n.a.createElement("div",{className:"cookie-alert-browser-toggle"},n.a.createElement("button",{className:"cookie-alert-browser-button "+("chrome"===t?"active":""),onClick:()=>l("chrome")},"Chrome"),n.a.createElement("button",{className:"cookie-alert-browser-button "+("safari"===t?"active":""),onClick:()=>l("safari")},"Safari")),"chrome"===t?n.a.createElement(o,null):n.a.createElement(s,null)),n.a.createElement("div",{className:"cookie-alert-footer"},n.a.createElement("strong",null,"Note:")," After changing these settings, you may need to refresh the page or restart your browser for the changes to take effect.")))};c.a.defaults.withCredentials=!0;const pe="https://keeper-app-bakcend-and-db.onrender.com";var ge=function(){const[e,a]=Object(r.useState)([]),[t,l]=Object(r.useState)(null),{user:o,loading:d,checkAuthStatus:m}=Object(r.useContext)(w);async function u(e){try{await c.a.delete(`${pe}/notes/${e}`,{withCredentials:!0}),t&&t.id===e&&l(null),a(a=>a.filter(a=>a.id!==e))}catch(r){console.error("There was an error deleting the note!",r)}}function p(e,a,t,r){l({id:e,title:a,content:t,category:r})}return Object(r.useEffect)(()=>{m()},[]),Object(r.useEffect)(()=>{o&&async function(){console.log("Fetching notes. Current user:",o);try{const e=await c.a.get(pe+"/notes",o,{withCredentials:!0});console.log("Notes fetched successfully:",e.data),a(e.data)}catch(t){var e;console.error("Error fetching notes:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),t.response&&401===t.response.status&&console.log("Unauthorized. Clearing user state.")}}()},[o]),d?n.a.createElement(f,null):n.a.createElement(s.a,null,n.a.createElement(O,null),n.a.createElement(ue,null),n.a.createElement(i.d,null,n.a.createElement(i.b,{path:"/",element:n.a.createElement(me,null,n.a.createElement("div",{className:"notes-container"},n.a.createElement(te,{onAdd:async function(e){try{const t=(await c.a.post(pe+"/add",e,{withCredentials:!0})).data;a(e=>[...e,t])}catch(t){console.error("Error adding note:",t)}},editNote:t,onUpdate:async function(e){console.log("Updating note:",e);try{if(!e.title||!e.content)throw new Error("Title and content are required");const t=await c.a.put(`${pe}/notes/${e.id}`,{title:e.title,content:e.content,category:e.category},{withCredentials:!0});console.log("Update response:",t.data),a(a=>a.map(a=>a.id===e.id?t.data:a)),l(null)}catch(r){var t;console.error("Error updating note:",(null===(t=r.response)||void 0===t?void 0:t.data)||r.message)}}}),e.map(e=>n.a.createElement(V,{key:e.id,id:e.id,title:e.title,content:e.content,category:e.category,onDelete:u,onEdit:p}))))}),n.a.createElement(i.b,{path:"/login",element:n.a.createElement(re,null)}),n.a.createElement(i.b,{path:"/register",element:n.a.createElement(oe,null)}),n.a.createElement(i.b,{path:"/google-callback",element:n.a.createElement(GoogleAuthCallback,null)}),n.a.createElement(i.b,{path:"/verify-email",element:n.a.createElement(de,null)}),n.a.createElement(i.b,{path:"/forgot-password",element:n.a.createElement(se,null)}),n.a.createElement(i.b,{path:"/reset-password/:token",element:n.a.createElement(ce,null)}),n.a.createElement(i.b,{path:"/loading",element:n.a.createElement(f,null)}),n.a.createElement(i.b,{path:"*",element:n.a.createElement(i.a,{to:"/",replace:!0})})),n.a.createElement(z,null))};o.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(k,null,n.a.createElement(ge,null))))}},[[145,1,2]]]);
//# sourceMappingURL=main.b20507b6.chunk.js.map